@model IEnumerable<Online.Models.ViewModel.BookingsVM>
@{
    ViewBag.Title = "BookingsVM";
}


@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@*@{
var productList = Model
                 .Where(c => c.CustomerId.Equals(Session["CustomerId"]))
                 .Sum(x => x.PkgBasePrice && y => y.BasePrice)
                  }*@

<body>
    @*<p>
            <h1>Welcome @Session["Username"].ToString()</h1>
        </p>*@

    <br /><br />
    <table class="table">
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.BookingDate)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.BookingNo)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TravelerCount)
            </th>
            @*<th>
                    @Html.DisplayNameFor(model => model.CustFirstName)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.CustLastName)
                </th>*@
            <th>
                @Html.DisplayNameFor(model => model.PkgName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PkgBasePrice)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Description)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.BasePrice)
            </th>
        </tr>

        @foreach (var item in Model.Where(ModelItem => ModelItem.CustomerId.Equals(Session["CustomerId"])))
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.BookingDate)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.BookingNo)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TravelerCount)
                </td>
                @*<td>
                        @Html.DisplayFor(modelItem => item.CustFirstName)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.CustLastName)
                    </td>*@
                <td>
                    @Html.DisplayFor(modelItem => item.PkgName)
                </td>
                <td>
                    $@Html.DisplayFor(modelItem => item.PkgBasePrice)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Description)
                </td>
                <td>
                    $@Html.DisplayFor(modelItem => item.BasePrice)
                </td>

            </tr>
        }

    </table>
    <h4>
        Package Total: @Model.Where(c => c.CustomerId.Equals(Session["CustomerId"])).Sum(b => b.PkgBasePrice).ToString("c")

    </h4>
    <h4>
        Product Total: @Model.Where(c => c.CustomerId.Equals(Session["CustomerId"])).Sum(b => b.BasePrice).Value.ToString("c")

    </h4>
    @{
        ViewBag.total = Model.Where(c => c.CustomerId.Equals(Session["CustomerId"])).Sum(b => b.PkgBasePrice) +
                    Model.Where(c => c.CustomerId.Equals(Session["CustomerId"])).Sum(b => b.BasePrice);
    }
    <h3>
        Total: @ViewBag.total.ToString("c")
        
    </h3>

    <div>
        @Html.ActionLink("Personal Information", "Customer", "Customer")
    </div>


</body>
@*</html>*@
